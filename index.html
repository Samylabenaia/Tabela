<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ranking Arena - Beach Tennis</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(to right, #00c6ff, #0072ff);
  color: #333;
  margin: 0;
  padding: 20px;
}
h1, h2 { text-align: center; color: #fff; text-shadow: 1px 1px 2px #000; }

nav { text-align: center; margin-bottom: 20px; }
nav button {
  padding: 10px 20px;
  margin: 5px;
  border-radius: 5px;
  border: none;
  background-color: #0072ff;
  color: #fff;
  cursor: pointer;
}
nav button:hover { background-color: #0056b3; }

table {
  border-collapse: collapse;
  width: 90%;
  margin: 10px auto;
  background-color: #fff;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}
th, td { padding: 12px 15px; text-align: center; }
th { background-color: #0072ff; color: #fff; }
tr:nth-child(even) { background-color: #f2f2f2; }
tr.top1 { background-color: #ffd700 !important; font-weight: bold; }
tr.top2 { background-color: #c0c0c0 !important; font-weight: bold; }
tr.top3 { background-color: #cd7f32 !important; font-weight: bold; }

.form-section {
  max-width: 650px;
  margin: 20px auto;
  background: rgba(255,255,255,0.9);
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

input, select, button { padding: 10px; margin: 5px; border-radius: 5px; border: 1px solid #ccc; }
button { background-color: #0072ff; color: #fff; cursor: pointer; transition: 0.3s; }
button:hover { background-color: #0056b3; }

.hidden { display: none; }
</style>
</head>
<body>

<h1>Ranking Arena - Beach Tennis</h1>

<nav>
  <button onclick="mostrarTela('usuario')">Usuário</button>
  <button onclick="mostrarTela('loginAdmin')">Administrador</button>
</nav>

<!-- Tela Usuário -->
<div id="telaUsuario">
  <h2>Feminino</h2>
  <table id="tabelaFemininoUser">
    <thead>
      <tr>
        <th>Posição</th>
        <th>Dupla</th>
        <th>Sets Ganhos</th>
        <th>Saldo de Sets</th>
        <th>Pontos</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h2>Masculino</h2>
  <table id="tabelaMasculinoUser">
    <thead>
      <tr>
        <th>Posição</th>
        <th>Dupla</th>
        <th>Sets Ganhos</th>
        <th>Saldo de Sets</th>
        <th>Pontos</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Tela Login Administrador -->
<div id="loginAdmin" class="hidden form-section">
  <h2>Login Administrador</h2>
  <input type="password" id="senhaAdmin" placeholder="Digite a senha">
  <button onclick="verificarSenha()">Entrar</button>
</div>

<!-- Tela Administrador -->
<div id="telaAdmin" class="hidden">

  <h2>Feminino</h2>
  <table id="tabelaFemininoAdmin">
    <thead>
      <tr>
        <th>Posição</th>
        <th>Dupla</th>
        <th>Sets Ganhos</th>
        <th>Saldo de Sets</th>
        <th>Pontos</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h2>Masculino</h2>
  <table id="tabelaMasculinoAdmin">
    <thead>
      <tr>
        <th>Posição</th>
        <th>Dupla</th>
        <th>Sets Ganhos</th>
        <th>Saldo de Sets</th>
        <th>Pontos</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="form-section">
    <h2>Adicionar Dupla</h2>
    <select id="categoriaAdmin">
      <option value="feminino">Feminino</option>
      <option value="masculino">Masculino</option>
    </select>
    <input type="text" id="dupla1" placeholder="Nome Jogador 1">
    <input type="text" id="dupla2" placeholder="Nome Jogador 2 (opcional)">
    <button onclick="adicionarDupla()">Adicionar</button>
  </div>

  <div class="form-section">
    <h2>Registrar Jogo</h2>
    <select id="categoriaJogo">
      <option value="feminino">Feminino</option>
      <option value="masculino">Masculino</option>
    </select>
    <input type="text" id="duplaJ1" placeholder="Nome Dupla 1 (separado por &)">
    <input type="text" id="duplaJ2" placeholder="Nome Dupla 2 (separado por &)">
    <input type="number" id="setsJ1" placeholder="Sets Dupla 1" min="0">
    <input type="number" id="setsJ2" placeholder="Sets Dupla 2" min="0">
    <select id="resultado">
      <option value="normal">Normal</option>
      <option value="wo1">WO Dupla 1</option>
      <option value="wo2">WO Dupla 2</option>
    </select>
    <button onclick="registrarJogo()">Registrar</button>
  </div>

</div>

<script>
let duplas = { feminino: {}, masculino: {} };

function mostrarTela(tela) {
  document.getElementById('telaUsuario').classList.add('hidden');
  document.getElementById('loginAdmin').classList.add('hidden');
  document.getElementById('telaAdmin').classList.add('hidden');

  if(tela === 'usuario') {
    atualizarTabelasUsuario();
    document.getElementById('telaUsuario').classList.remove('hidden');
  }
  if(tela === 'loginAdmin') document.getElementById('loginAdmin').classList.remove('hidden');
  if(tela === 'admin') {
    atualizarTabelasAdmin();
    atualizarTabelasUsuario();
    document.getElementById('telaAdmin').classList.remove('hidden');
  }
}

function verificarSenha() {
  const senha = document.getElementById('senhaAdmin').value;
  if(senha === '1234') {
    mostrarTela('admin');
    document.getElementById('senhaAdmin').value = '';
  } else alert('Senha incorreta!');
}

// Adicionar dupla
function adicionarDupla() {
  const cat = document.getElementById('categoriaAdmin').value;
  const j1 = document.getElementById('dupla1').value.trim();
  const j2 = document.getElementById('dupla2').value.trim();
  if(!j1) return alert('Digite ao menos um nome para a dupla.');
  const nomeDupla = j2 ? `${j1} & ${j2}` : j1;
  if(duplas[cat][nomeDupla]) return alert('Dupla já existe.');
  duplas[cat][nomeDupla] = { sets:0, saldo:0, pontos:0 };
  document.getElementById('dupla1').value = '';
  document.getElementById('dupla2').value = '';
  atualizarTabelasAdmin();
  atualizarTabelasUsuario();
}

// Atualizar tabelas
function atualizarTabelasAdmin() {
  atualizarTabela('feminino', 'tabelaFemininoAdmin');
  atualizarTabela('masculino', 'tabelaMasculinoAdmin');
}
function atualizarTabelasUsuario() {
  atualizarTabela('feminino', 'tabelaFemininoUser');
  atualizarTabela('masculino', 'tabelaMasculinoUser');
}

function atualizarTabela(categoria, tabelaID) {
  const tbody = document.getElementById(tabelaID).querySelector('tbody');
  tbody.innerHTML = '';
  let lista = Object.entries(duplas[categoria]);
  lista.sort((a,b)=>{
    if(b[1].pontos !== a[1].pontos) return b[1].pontos - a[1].pontos;
    if(b[1].sets !== a[1].sets) return b[1].sets - a[1].sets;
    return b[1].saldo - a[1].saldo;
  });
  lista.forEach((item,index)=>{
    const nome = item[0];
    const d = item[1];
    const tr = document.createElement('tr');
    if(index===0) tr.classList.add('top1');
    else if(index===1) tr.classList.add('top2');
    else if(index===2) tr.classList.add('top3');
    tr.innerHTML = `<td>${index+1}</td><td>${nome}</td><td>${d.sets}</td><td>${d.saldo}</td><td>${d.pontos}</td>`;
    tbody.appendChild(tr);
  });
}

// Registrar jogo
function registrarJogo() {
  const cat = document.getElementById('categoriaJogo').value;
  const d1 = document.getElementById('duplaJ1').value.trim();
  const d2 = document.getElementById('duplaJ2').value.trim();
  const sets1 = parseInt(document.getElementById('setsJ1').value) || 0;
  const sets2 = parseInt(document.getElementById('setsJ2').value) || 0;
  const res = document.getElementById('resultado').value;

  if(!duplas[cat][d1] || !duplas[cat][d2]) return alert('Dupla não encontrada.');

  if(res==='wo1') {
    duplas[cat][d1].pontos +=0;
    duplas[cat][d2].pontos +=3;
    duplas[cat][d2].sets += sets2;
    duplas[cat][d2].saldo += sets2;
  } else if(res==='wo2') {
    duplas[cat][d2].pontos +=0;
    duplas[cat][d1].pontos +=3;
    duplas[cat][d1].sets += sets1;
    duplas[cat][d1].saldo += sets1;
  } else {
    if(sets1>sets2){
      duplas[cat][d1].pontos +=3;
      duplas[cat][d2].pontos +=1;
    } else if(sets2>sets1){
      duplas[cat][d2].pontos +=3;
      duplas[cat][d1].pontos +=1;
    } else { // empate
      duplas[cat][d1].pontos +=1;
      duplas[cat][d2].pontos +=1;
    }
    duplas[cat][d1].sets += sets1;
    duplas[cat][d2].sets += sets2;
    duplas[cat][d1].saldo += sets1 - sets2;
    duplas[cat][d2].saldo += sets2 - sets1;
  }

  atualizarTabelasAdmin();
  atualizarTabelasUsuario();

  document.getElementById('duplaJ1').value='';
  document.getElementById('duplaJ2').value='';
  document.getElementById('setsJ1').value='';
  document.getElementById('setsJ2').value='';
}

// Atualiza tabela do usuário em tempo real
setInterval(()=>{
  if(!document.getElementById('telaUsuario').classList.contains('hidden')) {
    atualizarTabelasUsuario();
  }
}, 1000);

</script>

</body>
</html>
